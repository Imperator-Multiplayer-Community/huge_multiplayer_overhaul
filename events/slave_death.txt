namespace = slave_death

#The slaves are stressed!!
slave_death.1 = {
	type = province_event
	title = "slave_death.1.t"
	desc = "slave_death.1.desc"
	picture = revolt
	goto_location = ROOT
	
	trigger = {
		has_owner = yes
		num_of_slaves >= 25 #Was 20
		current_date > 451.1.1 #462.1.1
		slaves_happiness <= 0.05 
		NOT = { has_province_modifier = recent_slave_death }
		NOT = { is_capital = yes }
		has_city_status = yes
		owner = {
			NOT = { has_country_modifier = mass_slave_death } 
		}
	}
	
	weight_multiplier = {
		modifier = {
			add = {
				value = num_of_slaves
				divide = 1.5
				min = 1
			}
		}
	}
	
	immediate = {
		owner = {
			add_country_modifier = {
				name = "mass_slave_death" #Slaves are dead
				duration = 1825
			}
		}
		add_city_smoke_effect = yes
		add_city_fire_effect = yes
		add_state_loyalty = -10
		ordered_pops_in_province = {
			limit = {
				pop_type = slaves
			}		
		order_by = pop_hapiness 
			max = {
				value = total_population
				divide = 6
			}
		kill_pop = yes
		}
	}
	
	option = {
		name = "slave_death.1.a"
		custom_tooltip = slave_death.1.a.tt
		add_province_modifier = {
			name = recent_slave_death #Blocks for this province
			duration = 3650
		}
	}
}




